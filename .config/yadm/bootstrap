#!/bin/bash
CURR_DIR=dirname "$0"

sh $CURR_DIR/setup-manjaro.sh
sh $CURR_DIR/setup-python.sh
sh $CURR_DIR/setup-fonts.sh
sh $CURR_DIR/setup-emacs.sh

cd "$HOME"
yadm submodule update --recursive --init

# permissions
chmod 700 ~/.cache ~/.config

# sparse checkout to ignore README.md
yadm gitconfig core.sparseCheckout true
cat << EOF > "$HOME/.config/yadm/repo.git/info/sparse-checkout"
# generated by $0
/*
!README.md
!UNLICENSE
EOF
yadm checkout --quiet
